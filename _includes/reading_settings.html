{%- comment -%}
Reading Settings Panel - AMP-Compliant Version
Uses amp-bind for panel toggle and CSS custom properties for layout adjustments
{%- endcomment -%}

<amp-state id="readingSettings">
  <script type="application/json">
    {
      "panelOpen": false,
      "textScale": "1",
      "lineHeight": "1.7",
      "layoutWidth": "800px"
    }
  </script>
</amp-state>

<div class="reading-settings-wrapper" style="position: relative;">
    <button type="button"
            class="reading-settings-trigger"
            id="reading-settings-btn"
            [aria-expanded]="readingSettings.panelOpen ? 'true' : 'false'"
            aria-expanded="false"
            aria-controls="reading-settings-panel"
            aria-label="Reading Settings"
            on="tap:AMP.setState({ readingSettings: { panelOpen: !readingSettings.panelOpen } })">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
            <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
        </svg>
    </button>

    <div id="reading-settings-panel"
         class="reading-settings-panel"
         [aria-hidden]="readingSettings.panelOpen ? 'false' : 'true'"
         aria-hidden="true"
         [hidden]="!readingSettings.panelOpen"
         hidden>
        <!-- Text Size -->
        <div class="settings-group">
            <span class="settings-label">Text Size</span>
            <div class="settings-options">
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.textScale == '1' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { textScale: '1' } })"
                        aria-label="Text size 100%">100%</button>
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.textScale == '1.5' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { textScale: '1.5' } })"
                        aria-label="Text size 150%">150%</button>
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.textScale == '2' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { textScale: '2' } })"
                        aria-label="Text size 200%">200%</button>
            </div>
        </div>

        <!-- Line Height -->
        <div class="settings-group">
            <span class="settings-label">Line Height</span>
            <div class="settings-options">
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.lineHeight == '1.5' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { lineHeight: '1.5' } })"
                        aria-label="Line height Compact">Compact</button>
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.lineHeight == '1.7' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { lineHeight: '1.7' } })"
                        aria-label="Line height Normal">Normal</button>
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.lineHeight == '2' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { lineHeight: '2' } })"
                        aria-label="Line height Relaxed">Relaxed</button>
            </div>
        </div>

        <!-- Width -->
        <div class="settings-group">
            <span class="settings-label">Content Width</span>
            <div class="settings-options">
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.layoutWidth == '600px' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { layoutWidth: '600px' } })"
                        aria-label="Content width Narrow">Narrow</button>
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.layoutWidth == '800px' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { layoutWidth: '800px' } })"
                        aria-label="Content width Normal">Normal</button>
                <button type="button" class="settings-btn"
                        [aria-pressed]="readingSettings.layoutWidth == '100%' ? 'true' : 'false'"
                        on="tap:AMP.setState({ readingSettings: { layoutWidth: '100%' } })"
                        aria-label="Content width Full">Full</button>
            </div>
        </div>
    </div>
</div>
