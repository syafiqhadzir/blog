// ============================================
// SASS MIXINS
// Reusable style patterns
// ============================================

@use 'sass:map';

// ============================================
// BREAKPOINTS
// Mobile-first responsive design
// ============================================

/// Breakpoint values
$breakpoints: (
    'sm': 576px,
    'md': 768px,
    'lg': 992px,
    'xl': 1200px,
    'xxl': 1400px,
) !default;

/// Media query mixin (mobile-first)
/// @param {String} $breakpoint - Breakpoint name
@mixin breakpoint-up($breakpoint) {
    @if map.has-key($breakpoints, $breakpoint) {
        @media (min-width: map.get($breakpoints, $breakpoint)) {
            @content;
        }
    } @else {
        @error 'Unknown breakpoint: #{$breakpoint}';
    }
}

/// Media query mixin (desktop-first)
/// @param {String} $breakpoint - Breakpoint name
@mixin breakpoint-down($breakpoint) {
    @if map.has-key($breakpoints, $breakpoint) {
        @media (max-width: (map.get($breakpoints, $breakpoint) - 0.02px)) {
            @content;
        }
    } @else {
        @error 'Unknown breakpoint: #{$breakpoint}';
    }
}

// ============================================
// ACCESSIBILITY
// ============================================

/// Visually hidden but accessible to screen readers
@mixin sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    white-space: nowrap;
    border: 0;
    clip-path: inset(50%);
}

/// Focus ring for keyboard navigation
@mixin focus-ring {
    outline: none;
    border-radius: 2px;
    box-shadow: var(--focus-ring);
}

/// Reduced motion respecting transitions
@mixin transition($properties...) {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: var(--transition-base);
    transition-property: $properties;

    @media (prefers-reduced-motion: reduce) {
        /* stylelint-disable-next-line no-invalid-position-declaration -- transition-duration must be on the element itself */
        transition-duration: 0.01ms;
    }
}

// ============================================
// LAYOUT
// ============================================

/// Flexbox center
@mixin flex-center {
    display: flex;
    align-items: center;
    justify-content: center;
}

/// Flexbox space between
@mixin flex-between {
    display: flex;
    align-items: center;
    justify-content: space-between;
}

/// Absolute center (overlay)
@mixin absolute-center {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}

/// Full viewport cover
@mixin cover {
    position: fixed;
    inset: 0;
}

// ============================================
// TYPOGRAPHY
// ============================================

/// Text truncation with ellipsis
@mixin truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

/// Multi-line text truncation
/// @param {Number} $lines - Number of lines to show
@mixin line-clamp($lines) {
    display: -webkit-box;
    overflow: hidden;
    text-overflow: ellipsis;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: $lines;
}

// ============================================
// INTERACTIVE
// ============================================

/// Smooth hover lift effect
@mixin hover-lift($distance: 4px) {
    transition:
        transform var(--transition-fast),
        box-shadow var(--transition-fast);

    &:hover {
        box-shadow: var(--shadow-lift);
        transform: translateY(-#{$distance});
    }

    @media (prefers-reduced-motion: reduce) {
        &:hover {
            transform: none;
        }
    }
}

/// Card elevation shadow
/// @param {Number} $level - Elevation level (1-3)
@mixin elevation($level: 1) {
    @if $level == 1 {
        box-shadow:
            0 1px 3px var(--shadow-base),
            0 1px 2px rgb(0 0 0 / 6%);
    } @else if $level == 2 {
        box-shadow:
            0 4px 6px var(--shadow-base),
            0 2px 4px rgb(0 0 0 / 6%);
    } @else if $level == 3 {
        box-shadow:
            0 10px 20px var(--shadow-lift),
            0 3px 6px var(--shadow-base);
    }
}
